import { Address, TypedMap } from '@graphprotocol/graph-ts';

export let PermitRoutersByPool = new TypedMap<string, Address>();
{{#each pools}}
{{#ifAddress permitRouter}}
PermitRoutersByPool.set('{{address}}'.toLowerCase(), Address.fromString('{{permitRouter}}'));
{{/ifAddress}}
{{/each}}

export let FarmingHelpersByPool = new TypedMap<string, Address>();
{{#each pools}}
{{#ifAddress farmingHelper}}
FarmingHelpersByPool.set('{{address}}'.toLowerCase(), Address.fromString('{{farmingHelper}}'));
{{/ifAddress}}
{{/each}}

export let ClipperFeeSplitAddressesByDirectExchange = new TypedMap<string, Array<string>>();
{{#each pools}}
let feeSplitsForPool{{@index}} = new Array<string>();
{{#ifAddress feeSplit}}
feeSplitsForPool{{@index}}.push('{{feeSplit}}'.toLowerCase());
{{/ifAddress}}
{{#ifAddress farmFeeSplit}}
feeSplitsForPool{{@index}}.push('{{farmFeeSplit}}'.toLowerCase());
{{/ifAddress}}
ClipperFeeSplitAddressesByDirectExchange.set('{{address}}'.toLowerCase(), feeSplitsForPool{{@index}});
{{/each}}

export let PriceOracleAddresses = new TypedMap<string, string>()
export let OracleStartBlocks = new TypedMap<string, string>()
{{#each priceOracles}}
PriceOracleAddresses.set('{{symbol}}', '{{address}}')
{{#if startBlock}}
OracleStartBlocks.set('{{symbol}}', '{{startBlock}}')
{{/if}}
{{/each}}

export let FallbackAssetPrice = new TypedMap<string, string>()
{{#each fallbackPrices}}
FallbackAssetPrice.set('{{@key}}', '{{this}}')
{{/each}}

// Add daily fallback prices
export let DailyFallbackPrices = new TypedMap<string, TypedMap<string, string>>()
{{#each dailyFallbackPrices}}
let prices_{{@key}} = new TypedMap<string, string>()
{{#each this}}
prices_{{@../key}}.set('{{@key}}', '{{this}}')
{{/each}}
DailyFallbackPrices.set('{{@key}}', prices_{{@key}})
{{/each}}

export let AddressZeroSymbol = '{{addressZeroMap.symbol}}'
export let AddressZeroAddress = '{{addressZeroMap.address}}'
export let AddressZeroDecimals = '{{addressZeroMap.decimals}}'
export let AddressZeroName = '{{addressZeroMap.name}}'
